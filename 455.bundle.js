(self.webpackChunksample_dapp=self.webpackChunksample_dapp||[]).push([[455],{329:(e,t,n)=>{const i=n(560);e.exports=i("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},455:(e,t,n)=>{"use strict";n.r(t),n.d(t,{SolanaMobileWalletAdapter:()=>P,SolanaMobileWalletAdapterWalletName:()=>k,createDefaultAddressSelector:()=>M,createDefaultAuthorizationResultCache:()=>K,createDefaultWalletNotFoundHandler:()=>W});var i=n(702),o=n(745),r=n(939),s=n(397);new RegExp("^(?<domain>[^\\n]+?) wants you to sign in with your Solana account:\\n(?<address>[^\\n]+)(?:\\n|$)(?:\\n(?<statement>[\\S\\s]*?)(?:\\n|$))??(?:\\nURI: (?<uri>[^\\n]+))?(?:\\nVersion: (?<version>[^\\n]+))?(?:\\nChain ID: (?<chainId>[^\\n]+))?(?:\\nNonce: (?<nonce>[^\\n]+))?(?:\\nIssued At: (?<issuedAt>[^\\n]+))?(?:\\nExpiration Time: (?<expirationTime>[^\\n]+))?(?:\\nNot Before: (?<notBefore>[^\\n]+))?(?:\\nRequest ID: (?<requestId>[^\\n]+))?(?:\\nResources:(?<resources>(?:\\n- [^\\n]+)*))?\\n*$");const a="ERROR_FORBIDDEN_WALLET_BASE_URL";class c extends Error{constructor(...e){const[t,n,i]=e;super(n),this.code=t,this.data=i,this.name="SolanaMobileWalletAdapterError"}}class u extends Error{constructor(...e){const[t,n,i,o]=e;super(i),this.code=n,this.data=o,this.jsonRpcMessageId=t,this.name="SolanaMobileWalletAdapterProtocolError"}}function l(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function d(e,t){return l(this,void 0,void 0,(function*(){const n=yield crypto.subtle.exportKey("raw",e),i=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},t,n),o=new Uint8Array(n.byteLength+i.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(i),n.byteLength),o}))}const h="solana:cloneAuthorization";function y(e,t){return new Proxy({},{get:(n,i)=>(null==n[i]&&(n[i]=function(n){return l(this,void 0,void 0,(function*(){const{method:o,params:r}=function(e,t,n){let i=t,o=e.toString().replace(/[A-Z]/g,(e=>`_${e.toLowerCase()}`)).toLowerCase();switch(e){case"authorize":{let{chain:e}=i;if("legacy"===n){switch(e){case"solana:testnet":e="testnet";break;case"solana:devnet":e="devnet";break;case"solana:mainnet":e="mainnet-beta";break;default:e=i.cluster}i.cluster=e}else{switch(e){case"testnet":case"devnet":e=`solana:${e}`;break;case"mainnet-beta":e="solana:mainnet"}i.chain=e}}case"reauthorize":{const{auth_token:e,identity:t}=i;e&&("legacy"===n?(o="reauthorize",i={auth_token:e,identity:t}):o="authorize");break}}return{method:o,params:i}}(i,n,e),s=yield t(o,r);return"authorize"===o&&r.sign_in_payload&&!s.sign_in_result&&(s.sign_in_result=yield function(e,t,n){var i;return l(this,void 0,void 0,(function*(){const o=null!==(i=e.domain)&&void 0!==i?i:window.location.host,r=t.accounts[0].address,s=(a=Object.assign(Object.assign({},e),{domain:o,address:r}),c=function(e){return function(e){let t=`${e.domain} wants you to sign in with your Solana account:\n`;t+=`${e.address}`,e.statement&&(t+=`\n\n${e.statement}`);const n=[];if(e.uri&&n.push(`URI: ${e.uri}`),e.version&&n.push(`Version: ${e.version}`),e.chainId&&n.push(`Chain ID: ${e.chainId}`),e.nonce&&n.push(`Nonce: ${e.nonce}`),e.issuedAt&&n.push(`Issued At: ${e.issuedAt}`),e.expirationTime&&n.push(`Expiration Time: ${e.expirationTime}`),e.notBefore&&n.push(`Not Before: ${e.notBefore}`),e.requestId&&n.push(`Request ID: ${e.requestId}`),e.resources){n.push("Resources:");for(const t of e.resources)n.push(`- ${t}`)}return n.length&&(t+=`\n\n${n.join("\n")}`),t}(e)}(a),window.btoa(c));var a,c;return{address:r,signed_message:s,signature:(yield n("sign_messages",{addresses:[r],payloads:[s]})).signed_payloads[0].slice(s.length)}}))}(r.sign_in_payload,s,t)),function(e,t,n){if("getCapabilities"===e){const e=t;switch(n){case"legacy":{const t=["solana:signTransactions"];return!0===e.supports_clone_authorization&&t.push(h),Object.assign(Object.assign({},e),{features:t})}case"v1":return Object.assign(Object.assign({},e),{supports_sign_and_send_transactions:!0,supports_clone_authorization:e.features.includes(h)})}}return t}(i,s,e)}))}),n[i]),defineProperty:()=>!1,deleteProperty:()=>!1})}function f(e,t){return l(this,void 0,void 0,(function*(){const n=e.slice(0,4),i=e.slice(4,16),o=e.slice(16),r=yield crypto.subtle.decrypt(p(n,i),t,o);return(void 0===v&&(v=new TextDecoder("utf-8")),v).decode(r)}))}function p(e,t){return{additionalData:e,iv:t,name:"AES-GCM",tagLength:128}}let v;function w(){return l(this,void 0,void 0,(function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])}))}function g(e,t){return l(this,void 0,void 0,(function*(){return function(e,t,n){return l(this,void 0,void 0,(function*(){const i=function(e){if(e>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const t=new ArrayBuffer(4);return new DataView(t).setUint32(0,e,!1),new Uint8Array(t)}(t),o=new Uint8Array(12);crypto.getRandomValues(o);const r=yield crypto.subtle.encrypt(p(i,o),n,(new TextEncoder).encode(e)),s=new Uint8Array(i.byteLength+o.byteLength+r.byteLength);return s.set(new Uint8Array(i),0),s.set(new Uint8Array(o),i.byteLength),s.set(new Uint8Array(r),i.byteLength+o.byteLength),s}))}(JSON.stringify(e),e.id,t)}))}function m(e){if(e<49152||e>65535)throw new c("ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",`Association port number must be between 49152 and 65535. ${e} given.`,{port:e});return e}function _(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}let b=null;function A(e,t){return l(this,void 0,void 0,(function*(){const n=m(49152+Math.floor(16384*Math.random())),i=yield function(e,t,n,i=["v1"]){return l(this,void 0,void 0,(function*(){const o=m(t),r=function(e){let t="";const n=new Uint8Array(e),i=n.byteLength;for(let e=0;e<i;e++)t+=String.fromCharCode(n[e]);return window.btoa(t)}(yield crypto.subtle.exportKey("raw",e)),s=function(e,t){let n=null;if(t){try{n=new URL(t)}catch(e){}if("https:"!==(null==n?void 0:n.protocol))throw new c(a,"Base URLs supplied by wallets must be valid `https` URLs")}n||(n=new URL("solana-wallet:/"));const i=e.startsWith("/")?e:[..._(n.pathname),..._(e)].join("/");return new URL(i,n)}("v1/associate/local",n);return s.searchParams.set("association",r.replace(/[/+=]/g,(e=>({"/":"_","+":"-","=":"."}[e])))),s.searchParams.set("port",`${o}`),i.forEach((e=>{s.searchParams.set("v",e)})),s}))}(e,n,t);return yield function(e){return l(this,void 0,void 0,(function*(){if("https:"===e.protocol)window.location.assign(e);else try{switch(-1!==navigator.userAgent.indexOf("Firefox/")?0:1){case 0:t=e,null==b&&(b=document.createElement("iframe"),b.style.display="none",document.body.appendChild(b)),b.contentWindow.location.href=t.toString();break;case 1:{const t=new Promise(((e,t)=>{function n(){clearTimeout(o),window.removeEventListener("blur",i)}function i(){n(),e()}window.addEventListener("blur",i);const o=setTimeout((()=>{n(),t()}),2e3)}));window.location.assign(e),yield t;break}}}catch(e){throw new c("ERROR_WALLET_NOT_FOUND","Found no installed wallet that supports the mobile wallet protocol.")}var t}))}(i),n}))}const R={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4};function E(e){return new DataView(e).getUint32(0,!1)}var S=n(329);function O(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(e,i[o])&&(n[i[o]]=e[i[o]])}return n}function L(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}function C(e){return window.btoa(String.fromCharCode.call(null,...e))}function I(e){return new Uint8Array(window.atob(e).split("").map((e=>e.charCodeAt(0))))}function T(e){return C("version"in e?e.serialize():e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}function z(e){const t=e[0]*s.P3+1;return"legacy"===s.B2.deserializeMessageVersion(e.slice(t,e.length))?s.ZX.from(e):s.Kt.deserialize(e)}function j(e,t){return L(this,void 0,void 0,(function*(){return yield function(e,t){return l(this,void 0,void 0,(function*(){!function(){if("undefined"==typeof window||!0!==window.isSecureContext)throw new c("ERROR_SECURE_CONTEXT_REQUIRED","The mobile wallet adapter protocol must be used in a secure context (`https`).")}();const n=yield function(){return l(this,void 0,void 0,(function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])}))}(),i=`ws://localhost:${yield A(n.publicKey,null==t?void 0:t.baseUri)}/solana-wallet`;let o;const r=(()=>{const e=[...R.retryDelayScheduleMs];return()=>e.length>1?e.shift():e[0]})();let s=1,h=0,p={__type:"disconnected"};return new Promise(((t,v)=>{let m;const _={},b=()=>l(this,void 0,void 0,(function*(){if("connecting"!==p.__type)return void console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${p.__type}\`.`);m.removeEventListener("open",b);const{associationKeypair:e}=p,t=yield w();m.send(yield d(t.publicKey,e.privateKey)),p={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:t.privateKey}})),A=e=>{e.wasClean?p={__type:"disconnected"}:v(new c("ERROR_SESSION_CLOSED",`The wallet session dropped unexpectedly (${e.code}: ${e.reason}).`,{closeEvent:e})),L()},S=e=>l(this,void 0,void 0,(function*(){L(),Date.now()-o>=R.timeoutMs?v(new c("ERROR_SESSION_TIMEOUT",`Failed to connect to the wallet websocket at ${i}.`)):(yield new Promise((e=>{const t=r();C=window.setTimeout(e,t)})),I())})),O=i=>l(this,void 0,void 0,(function*(){const o=yield i.data.arrayBuffer();switch(p.__type){case"connecting":if(0!==o.byteLength)throw new Error("Encountered unexpected message while connecting");const i=yield w();m.send(yield d(i.publicKey,n.privateKey)),p={__type:"hello_req_sent",associationPublicKey:n.publicKey,ecdhPrivateKey:i.privateKey};break;case"connected":try{const e=E(o.slice(0,4));if(e!==h+1)throw new Error("Encrypted message has invalid sequence number");h=e;const t=yield function(e,t){return l(this,void 0,void 0,(function*(){const n=yield f(e,t),i=JSON.parse(n);if(Object.hasOwnProperty.call(i,"error"))throw new u(i.id,i.error.code,i.error.message);return i}))}(o,p.sharedSecret),n=_[t.id];delete _[t.id],n.resolve(t.result)}catch(e){if(!(e instanceof u))throw e;{const t=_[e.jsonRpcMessageId];delete _[e.jsonRpcMessageId],t.reject(e)}}break;case"hello_req_sent":{if(0===o.byteLength){const e=yield w();m.send(yield d(e.publicKey,n.privateKey)),p={__type:"hello_req_sent",associationPublicKey:n.publicKey,ecdhPrivateKey:e.privateKey};break}const i=yield function(e,t,n){return l(this,void 0,void 0,(function*(){const[i,o]=yield Promise.all([crypto.subtle.exportKey("raw",t),crypto.subtle.importKey("raw",e.slice(0,65),{name:"ECDH",namedCurve:"P-256"},!1,[])]),r=yield crypto.subtle.deriveBits({name:"ECDH",public:o},n,256),s=yield crypto.subtle.importKey("raw",r,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(i),info:new Uint8Array},s,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])}))}(o,p.associationPublicKey,p.ecdhPrivateKey),r=o.slice(65),u=0!==r.byteLength?yield(()=>l(this,void 0,void 0,(function*(){const e=E(r.slice(0,4));if(e!==h+1)throw new Error("Encrypted message has invalid sequence number");return h=e,function(e,t){return l(this,void 0,void 0,(function*(){const n=yield f(e,t),i=JSON.parse(n);let o="legacy";if(Object.hasOwnProperty.call(i,"v"))switch(i.v){case 1:case"1":case"v1":o="v1";break;case"legacy":o="legacy";break;default:throw new c("ERROR_INVALID_PROTOCOL_VERSION",`Unknown/unsupported protocol version: ${i.v}`)}return{protocol_version:o}}))}(r,i)})))():{protocol_version:"legacy"};p={__type:"connected",sharedSecret:i,sessionProperties:u};const b=y(u.protocol_version,((e,t)=>l(this,void 0,void 0,(function*(){const n=s++;return m.send(yield g({id:n,jsonrpc:"2.0",method:e,params:null!=t?t:{}},i)),new Promise(((t,i)=>{_[n]={resolve(n){switch(e){case"authorize":case"reauthorize":{const{wallet_uri_base:e}=n;if(null!=e)try{!function(e){let t;try{t=new URL(e)}catch(e){throw new c(a,"Invalid base URL supplied by wallet")}if("https:"!==t.protocol)throw new c(a,"Base URLs supplied by wallets must be valid `https` URLs")}(e)}catch(e){return void i(e)}break}}t(n)},reject:i}}))}))));try{t(yield e(b))}catch(e){v(e)}finally{L(),m.close()}break}}}));let L,C;const I=()=>{L&&L(),p={__type:"connecting",associationKeypair:n},void 0===o&&(o=Date.now()),m=new WebSocket(i,["com.solana.mobilewalletadapter.v1"]),m.addEventListener("open",b),m.addEventListener("close",A),m.addEventListener("error",S),m.addEventListener("message",O),L=()=>{window.clearTimeout(C),m.removeEventListener("open",b),m.removeEventListener("close",A),m.removeEventListener("error",S),m.removeEventListener("message",O)}};I()}))}))}((t=>{const n=new Proxy({},{get(e,n){if(null==e[n])switch(n){case"signAndSendTransactions":e[n]=function(e){var{minContextSlot:n,commitment:i,skipPreflight:o,maxRetries:r,waitForCommitmentToSendNextTransaction:s,transactions:a}=e,c=O(e,["minContextSlot","commitment","skipPreflight","maxRetries","waitForCommitmentToSendNextTransaction","transactions"]);return L(this,void 0,void 0,(function*(){const e=a.map(T),u={min_context_slot:n,commitment:i,skip_preflight:o,max_retries:r,wait_for_commitment_to_send_next_transaction:s},{signatures:l}=yield t.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},c),Object.values(u).some((e=>null!=e))?{options:u}:null),{payloads:e}));return l.map(I).map(S.encode)}))};break;case"signMessages":e[n]=function(e){var{payloads:n}=e,i=O(e,["payloads"]);return L(this,void 0,void 0,(function*(){const e=n.map(C),{signed_payloads:o}=yield t.signMessages(Object.assign(Object.assign({},i),{payloads:e}));return o.map(I)}))};break;case"signTransactions":e[n]=function(e){var{transactions:n}=e,i=O(e,["transactions"]);return L(this,void 0,void 0,(function*(){const e=n.map(T),{signed_payloads:o}=yield t.signTransactions(Object.assign(Object.assign({},i),{payloads:e}));return o.map(I).map(z)}))};break;default:e[n]=t[n]}return e[n]},defineProperty:()=>!1,deleteProperty:()=>!1});return e(n)}),t)}))}function U(e,t,n,i){return new(n||(n=Promise))((function(o,r){function s(e){try{c(i.next(e))}catch(e){r(e)}}function a(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))}const k="Mobile Wallet Adapter";function N(e){return"version"in e}class P extends i.DE{constructor(e){super(),this.supportedTransactionVersions=new Set(["legacy",0]),this.name=k,this.url="https://solanamobile.com/wallets",this.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==",this._connecting=!1,this._connectionGeneration=0,this._readyState="undefined"!=typeof window&&window.isSecureContext&&"undefined"!=typeof document&&/android/i.test(navigator.userAgent)?o.Ok.Loadable:o.Ok.Unsupported,this._authorizationResultCache=e.authorizationResultCache,this._addressSelector=e.addressSelector,this._appIdentity=e.appIdentity,this._cluster=e.cluster,this._onWalletNotFound=e.onWalletNotFound,this._readyState!==o.Ok.Unsupported&&this._authorizationResultCache.get().then((e=>{e&&this.declareWalletAsInstalled()}))}get publicKey(){if(null==this._publicKey&&null!=this._selectedAddress)try{this._publicKey=function(e){const t=(n=e,new Uint8Array(window.atob(n).split("").map((e=>e.charCodeAt(0)))));var n;return new s.J3(t)}(this._selectedAddress)}catch(e){throw new r.Kd(e instanceof Error&&(null==e?void 0:e.message)||"Unknown error",e)}return this._publicKey?this._publicKey:null}get connected(){return!!this._authorizationResult}get connecting(){return this._connecting}get readyState(){return this._readyState}declareWalletAsInstalled(){this._readyState!==o.Ok.Installed&&this.emit("readyStateChange",this._readyState=o.Ok.Installed)}runWithGuard(e){return U(this,void 0,void 0,(function*(){try{return yield e()}catch(e){throw this.emit("error",e),e}}))}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return U(this,void 0,void 0,(function*(){return yield this.autoConnect()}))}autoConnect(){return U(this,void 0,void 0,(function*(){if(!this.connecting&&!this.connected)return yield this.runWithGuard((()=>U(this,void 0,void 0,(function*(){if(this._readyState!==o.Ok.Installed&&this._readyState!==o.Ok.Loadable)throw new r.AE;this._connecting=!0;try{const e=yield this._authorizationResultCache.get();e&&this.handleAuthorizationResult(e)}catch(e){throw new r.Y6(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))))}))}connect(){return U(this,void 0,void 0,(function*(){if(!this.connecting&&!this.connected)return yield this.runWithGuard((()=>U(this,void 0,void 0,(function*(){if(this._readyState!==o.Ok.Installed&&this._readyState!==o.Ok.Loadable)throw new r.AE;this._connecting=!0;try{const e=yield this._authorizationResultCache.get();if(e)return void this.handleAuthorizationResult(e);yield this.transact((e=>U(this,void 0,void 0,(function*(){const t=yield e.authorize({cluster:this._cluster,identity:this._appIdentity});Promise.all([this._authorizationResultCache.set(t),this.handleAuthorizationResult(t)])}))))}catch(e){throw new r.Y6(e instanceof Error&&e.message||"Unknown error",e)}finally{this._connecting=!1}}))))}))}handleAuthorizationResult(e){var t;return U(this,void 0,void 0,(function*(){const n=null==this._authorizationResult||(null===(t=this._authorizationResult)||void 0===t?void 0:t.accounts.length)!==e.accounts.length||this._authorizationResult.accounts.some(((t,n)=>t.address!==e.accounts[n].address));if(this._authorizationResult=e,this.declareWalletAsInstalled(),n){const t=yield this._addressSelector.select(e.accounts.map((({address:e})=>e)));t!==this._selectedAddress&&(this._selectedAddress=t,delete this._publicKey,this.emit("connect",this.publicKey))}}))}performReauthorization(e,t){return U(this,void 0,void 0,(function*(){try{const n=yield e.reauthorize({auth_token:t,identity:this._appIdentity});Promise.all([this._authorizationResultCache.set(n),this.handleAuthorizationResult(n)])}catch(e){throw this.disconnect(),new r.PQ(e instanceof Error&&(null==e?void 0:e.message)||"Unknown error",e)}}))}disconnect(){return U(this,void 0,void 0,(function*(){this._authorizationResultCache.clear(),this._connecting=!1,this._connectionGeneration++,delete this._authorizationResult,delete this._publicKey,delete this._selectedAddress,this.emit("disconnect")}))}transact(e){var t;return U(this,void 0,void 0,(function*(){const n=null===(t=this._authorizationResult)||void 0===t?void 0:t.wallet_uri_base,i=n?{baseUri:n}:void 0,o=this._connectionGeneration;try{return yield j(e,i)}catch(e){throw this._connectionGeneration!==o&&(yield new Promise((()=>{}))),e instanceof Error&&"SolanaMobileWalletAdapterError"===e.name&&"ERROR_WALLET_NOT_FOUND"===e.code&&(yield this._onWalletNotFound(this)),e}}))}assertIsAuthorized(){if(!this._authorizationResult||!this._selectedAddress)throw new r.kW;return{authToken:this._authorizationResult.auth_token,selectedAddress:this._selectedAddress}}performSignTransactions(e){return U(this,void 0,void 0,(function*(){const{authToken:t}=this.assertIsAuthorized();try{return yield this.transact((n=>U(this,void 0,void 0,(function*(){return yield this.performReauthorization(n,t),yield n.signTransactions({transactions:e})}))))}catch(e){throw new r.z4(null==e?void 0:e.message,e)}}))}sendTransaction(e,t,n){return U(this,void 0,void 0,(function*(){return yield this.runWithGuard((()=>U(this,void 0,void 0,(function*(){const{authToken:i}=this.assertIsAuthorized(),o=null==n?void 0:n.minContextSlot;try{return yield this.transact((r=>U(this,void 0,void 0,(function*(){function s(){let e,i;switch(t.commitment){case"confirmed":case"finalized":case"processed":e=t.commitment;break;default:e="finalized"}switch(null==n?void 0:n.preflightCommitment){case"confirmed":case"finalized":case"processed":i=n.preflightCommitment;break;case void 0:i=e;default:i="finalized"}return("finalized"===i?2:"confirmed"===i?1:0)<("finalized"===e?2:"confirmed"===e?1:0)?i:e}const[a,c,u]=yield Promise.all([r.getCapabilities(),this.performReauthorization(r,i),N(e)?null:(()=>U(this,void 0,void 0,(function*(){var n;if(e.feePayer||(e.feePayer=null!==(n=this.publicKey)&&void 0!==n?n:void 0),null==e.recentBlockhash){const{blockhash:n}=yield t.getLatestBlockhash({commitment:s()});e.recentBlockhash=n}})))()]);if(a.supports_sign_and_send_transactions)return(yield r.signAndSendTransactions({minContextSlot:o,transactions:[e]}))[0];{const[i]=yield r.signTransactions({transactions:[e]});if(N(i))return yield t.sendTransaction(i);{const e=i.serialize();return yield t.sendRawTransaction(e,Object.assign(Object.assign({},n),{preflightCommitment:s()}))}}}))))}catch(e){throw new r.UF(null==e?void 0:e.message,e)}}))))}))}signTransaction(e){return U(this,void 0,void 0,(function*(){return yield this.runWithGuard((()=>U(this,void 0,void 0,(function*(){const[t]=yield this.performSignTransactions([e]);return t}))))}))}signAllTransactions(e){return U(this,void 0,void 0,(function*(){return yield this.runWithGuard((()=>U(this,void 0,void 0,(function*(){return yield this.performSignTransactions(e)}))))}))}signMessage(e){return U(this,void 0,void 0,(function*(){return yield this.runWithGuard((()=>U(this,void 0,void 0,(function*(){const{authToken:t,selectedAddress:n}=this.assertIsAuthorized();try{return yield this.transact((i=>U(this,void 0,void 0,(function*(){yield this.performReauthorization(i,t);const[o]=yield i.signMessages({addresses:[n],payloads:[e]});return o.slice(-64)}))))}catch(e){throw new r.K3(null==e?void 0:e.message,e)}}))))}))}}function M(){return{select(e){return U(this,void 0,void 0,(function*(){return e[0]}))}}}const x="SolanaMobileWalletAdapterDefaultAuthorizationCache";function K(){let e;try{e=window.localStorage}catch(e){}return{clear(){return U(this,void 0,void 0,(function*(){if(e)try{e.removeItem(x)}catch(e){}}))},get(){return U(this,void 0,void 0,(function*(){if(e)try{return JSON.parse(e.getItem(x))||void 0}catch(e){}}))},set(t){return U(this,void 0,void 0,(function*(){if(e)try{e.setItem(x,JSON.stringify(t))}catch(e){}}))}}}function D(e){return U(this,void 0,void 0,(function*(){"undefined"!=typeof window&&window.location.assign(e.url)}))}function W(){return D}},560:e=>{"use strict";e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),r=o.charCodeAt(0);if(255!==t[r])throw new TypeError(o+" is ambiguous");t[r]=i}var s=e.length,a=e.charAt(0),c=Math.log(s)/Math.log(256),u=Math.log(256)/Math.log(s);function l(e){if("string"!=typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var n=0,i=0,o=0;e[n]===a;)i++,n++;for(var r=(e.length-n)*c+1>>>0,u=new Uint8Array(r);e[n];){var l=e.charCodeAt(n);if(l>255)return;var d=t[l];if(255===d)return;for(var h=0,y=r-1;(0!==d||h<o)&&-1!==y;y--,h++)d+=s*u[y]>>>0,u[y]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");o=h,n++}for(var f=r-o;f!==r&&0===u[f];)f++;for(var p=new Uint8Array(i+(r-f)),v=i;f!==r;)p[v++]=u[f++];return p}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,i=0,o=0,r=t.length;o!==r&&0===t[o];)o++,n++;for(var c=(r-o)*u+1>>>0,l=new Uint8Array(c);o!==r;){for(var d=t[o],h=0,y=c-1;(0!==d||h<i)&&-1!==y;y--,h++)d+=256*l[y]>>>0,l[y]=d%s>>>0,d=d/s>>>0;if(0!==d)throw new Error("Non-zero carry");i=h,o++}for(var f=c-i;f!==c&&0===l[f];)f++;for(var p=a.repeat(n);f<c;++f)p+=e.charAt(l[f]);return p},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+s+" character")}}}}}]);